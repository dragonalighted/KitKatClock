/*
=================================================
KitKatClock jQuery Plugin

Author: Bryan Iddings
http://iddings.co/KitKatClock

****MAINTAIN THIS HEADER WHEN REDISTRIBUTING****

This work is licensed under the Creative
Commons Attribution-NonCommercial-ShareAlike
4.0 International License. To view a copy of
this license, visit
http://creativecommons.org/licenses/by-nc-sa/4.0/
=================================================
*/
(function(c){window.__kkc=[];for(var B=["webkit","moz","ms","o"],n=!1,C=document.createElement("div"),v=0;v<B.length;v++)if(void 0!==C.style["-"+B[v]+"-transform"]){n=!0;break}void 0!==C.style.transform&&(n=!0);n?(__kkc.animate_duration=350,__kkc.allow_draw=!0,__kkc.hour_mode=!0,__kkc.mouse_down=!1,__kkc.finalize=!1,__kkc.degrade=!0,__kkc.position_ratio=1.6,__kkc.finalize_wrap=function(){!1!==__kkc.finalize&&__kkc.finalize()},__kkc.opener,__kkc.setup=function(b){function u(b,g){if(1!=w.css("opacity")||
!g)if(1!=x.css("opacity")||g)c(".kkc-clockface-hand").fadeOut(__kkc.animate_duration/2),g?(c(".kkc-clockface-numbers-minutes div").each(function(){var a=radius-100,e=parseFloat(c(this).attr("radian")),g=a+-1*Math.cos(e)*(a-b.fontSize/__kkc.position_ratio),a=a+-1*Math.sin(e)*(a-b.fontSize/__kkc.position_ratio);c(this).animate({top:a,left:g},__kkc.animate_duration,"flex")}),c(".kkc-clockface-numbers-hours div").each(function(){var a=radius+100,e=parseFloat(c(this).attr("radian")),g=a+-1*Math.cos(e)*
(a-b.fontSize/__kkc.position_ratio),a=a+-1*Math.sin(e)*(a-b.fontSize/__kkc.position_ratio);c(this).css({top:a,left:g});a=radius;e=parseFloat(c(this).attr("radian"));g=a+-1*Math.cos(e)*(a-b.fontSize/__kkc.position_ratio);a+=-1*Math.sin(e)*(a-b.fontSize/__kkc.position_ratio);c(this).animate({top:a,left:g},__kkc.animate_duration,"flex")}),x.animate({width:b.size-200,left:100,height:b.size-200,top:100,opacity:0},__kkc.animate_duration,"flex"),w.css({opacity:0,top:-100,left:-100}).animate({width:b.size,
left:0,height:b.size,top:0,opacity:1},__kkc.animate_duration,"flex"),setTimeout(function(){l(parseInt(a.attr("hour"))*Math.PI/6,b)},__kkc.animate_duration/2),p.css("color",d.hand),q.css("color","")):(c(".kkc-clockface-numbers-hours div").each(function(){var a=radius+100,e=parseFloat(c(this).attr("radian")),g=a+-1*Math.cos(e)*(a-b.fontSize/__kkc.position_ratio),a=a+-1*Math.sin(e)*(a-b.fontSize/__kkc.position_ratio);c(this).animate({top:a,left:g},__kkc.animate_duration,"flex")}),c(".kkc-clockface-numbers-minutes div").each(function(){var a=
radius-100,e=parseFloat(c(this).attr("radian")),g=a+-1*Math.cos(e)*(a-b.fontSize/__kkc.position_ratio),a=a+-1*Math.sin(e)*(a-b.fontSize/__kkc.position_ratio);c(this).css({top:a,left:g});a=radius;e=parseFloat(c(this).attr("radian"));g=a+-1*Math.cos(e)*(a-b.fontSize/__kkc.position_ratio);a+=-1*Math.sin(e)*(a-b.fontSize/__kkc.position_ratio);c(this).animate({top:a,left:g},__kkc.animate_duration,"flex")}),w.animate({width:b.size+200,left:-100,height:b.size+200,top:-100,opacity:0},__kkc.animate_duration,
"flex"),x.css({opacity:0,top:100,left:100}).animate({width:b.size,left:0,height:b.size,top:0,opacity:1},__kkc.animate_duration,"flex"),setTimeout(function(){l(parseInt(a.attr("minute"))*Math.PI/30,b)},__kkc.animate_duration/2),p.css("color",""),q.css("color",d.hand)),c(".kkc-clockface-hand").fadeIn(__kkc.animate_duration/2)}function l(a,b){c("#kitkatclock .kkc-clockface-hand").css({"-webkit-transform":"rotate("+180*a/Math.PI+"deg)","-moz-transform":"rotate("+180*a/Math.PI+"deg)","-ms-transform":"rotate("+
180*a/Math.PI+"deg)","-o-transform":"rotate("+180*a/Math.PI+"deg)",transform:"rotate("+180*a/Math.PI+"deg)"})}__kkc.finalize=function(){if(null!==__kkc.opener){var b=p.html().replace("&nbsp;",""),g=q.html(),f=r.html();__kkc.opener.value=b+":"+g+" "+f;var e=parseInt(c(__kkc.opener).attr("kkc-id"));__kkc[e].time=b+":"+g+" "+f;a.hide()}};var d=b.colors,a=c("#kitkatclock");c("*",a).off();var h=c("#kitkatclock .kkc-time-cont"),p=c("#kitkatclock .kkc-hour"),q=c("#kitkatclock .kkc-minute"),r=c("#kitkatclock .kkc-am-pm"),
D=c("#kitkatclock .kkc-clockface-cont");c("#kitkatclock .kkc-clockface-clock").css({width:b.size,height:b.size,position:"absolute",top:0,left:10,background:d.clock,borderRadius:"50%"});var z=c(".kkc-clockface-cover"),A=c("#kitkatclock .kkc-clockface-hand").css({width:1.35*b.fontSize,height:b.size,position:"absolute",top:0,left:"calc(50% - "+1.35*b.fontSize/2+"px)"}),w=c("#kitkatclock .kkc-clockface-numbers-hours").css({width:b.size,height:b.size,position:"absolute",top:0,left:0,padding:"0px 10px"}),
x=c("#kitkatclock .kkc-clockface-numbers-minutes").css({width:b.size,height:b.size,position:"absolute",top:0,left:0,padding:"0px 10px"}),s=c("#kitkatclock .kkc-am-btn"),t=c("#kitkatclock .kkc-pm-btn"),y=c("#kitkatclock .kkc-done-btn");h.css({height:b.fontSize,width:"100%",padding:"0px 0px 12px 0px",color:d.text,background:d.top_indicator_background});r.css({fontSize:b.fontSize/2,cursor:"pointer"});D.css({position:"relative",marginTop:4,height:b.size,cursor:"pointer",overflow:"hidden"});var k=b.time.split(":"),
h=parseInt(k[0]),m=parseInt(k[1].split(" ")[0]),k=-1!=k[1].toUpperCase().indexOf("AM");a.attr({hour:h,minute:m});s.css({position:"absolute",bottom:0,left:10,width:b.fontSize,height:b.fontSize,fontSize:b.fontSize/2,lineHeight:b.fontSize+"px",textAlign:"center",border:"1px solid transparent",borderRadius:b.fontSize/2,cursor:"pointer"});t.css({position:"absolute",bottom:0,right:10,width:b.fontSize,height:b.fontSize,fontSize:b.fontSize/2,lineHeight:b.fontSize+"px",textAlign:"center",border:"1px solid transparent",
borderRadius:b.fontSize/2,cursor:"pointer"});p.on("click",function(){u(b,!0);__kkc.hour_mode=!0}).css({cursor:"pointer"});q.on("click",function(){u(b);__kkc.hour_mode=!1}).css({cursor:"pointer"});k?(s.css("background",d.meridian_background_on),t.css("background",d.meridian_background_off)):(t.css("background",d.meridian_background_on),s.css("background",d.meridian_background_off));p.html(h);q.html((10>m?"0":"")+m);r.html(k?"AM":"PM").on("click",function(){"AM"==this.innerHTML?(r.html("PM"),t.css("background",
d.meridian_background_on),s.css("background",d.meridian_background_off)):(r.html("AM"),t.css("background",d.meridian_background_off),s.css("background",d.meridian_background_on))});y.css({borderTop:"1px solid "+d.border,marginTop:"4px",cursor:"pointer"});window.radius=b.size/2;A.html("<div class='kkc-clockface-hand-hand'></div><div class='kkc-clockface-hand-arm'></div>");c(".kkc-clockface-hand-hand").css({position:"absolute",top:0,left:0,borderRadius:"50%",width:1.35*b.fontSize,height:1.35*b.fontSize,
background:d.hand});c(".kkc-clockface-hand-arm").css({width:8,height:"calc(50% - 10px)",position:"absolute",top:10,left:"calc(50% - 4px)",background:d.hand});__kkc.allow_draw=!0;__kkc.hour_mode=!0;__kkc.mouse_down=!1;l(Math.PI/6*(12==h?0:h),b);s.on("click",function(){r.html("AM");s.css("background",d.meridian_background_on);t.css("background",d.meridian_background_off)});t.on("click",function(){r.html("PM");t.css("background",d.meridian_background_on);s.css("background",d.meridian_background_off)});
D.on("mousemove mousedown mouseup touchstart touchend touchcancel click touchmove",function(d){if(__kkc.allow_draw&&!c(d.target).is(s)&&!c(d.target).is(t)){var g;g=D.offset();var f=d.pageX,e=d.pageY;f||(f=d.originalEvent.touches[0].pageX,e=d.originalEvent.touches[0].pageY);f-=g.left;e-=g.top;switch(d.type){case "touchmove":g="mousemove";d.preventDefault();break;case "touchend":g="mouseup";break;case "touchcancel":g="mouseup";break;case "touchstart":g="mousedown";break;default:g=d.type}"mousedown"==
g&&(__kkc.mouse_down=!0);"mouseup"==g&&(__kkc.mouse_down=!1);if("click"==g||"mousedown"==g||"mousemove"==g&&__kkc.mouse_down){d=__kkc.hour_mode?12:60;f-=radius;e-=radius;f/=-1*radius;e/=-1*radius;if(1<f||1<e||0==f&&0==e)return;f=Math.atan2(f,e);0<f&&(f=2*Math.PI-f);f=Math.abs(f);d=Math.PI/(d/2)*Math.round(f/(Math.PI/(d/2)))/(Math.PI/(d/2));f=0+d*Math.PI/(__kkc.hour_mode?6:30);f=f>2*Math.PI?f-2*Math.PI:f;l(f,b);__kkc.hour_mode?(a.attr("hour",d),f=a.attr("minute")||0,f=parseInt(f),e=d):(a.attr("minute",
d),e=a.attr("hour")||0,e=parseInt(e),f=d);f=Math.round(f);f=60==f?0:f;p.html((10>e&&0!=e?"&nbsp;":"")+(0==e?12:e));q.html((10>f?"0":"")+f)}"mouseup"==g&&__kkc.hour_mode&&(__kkc.hour_mode=!1,u(b),__kkc.allow_draw=!1,setTimeout(function(){__kkc.allow_draw=!0},100))}});z.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});y.on("click",__kkc.finalize);a.css({width:b.size+20,border:"3px solid "+d.border,fontSize:b.fontSize,textAlign:"center",color:d.text,background:d.background,fontFamily:b.fontFamily,
position:"absolute"});var k=c(__kkc.opener).offset(),z=c(document).width(),A=c(document).height(),y=a.outerWidth(),h=a.outerHeight(),m=k.top,k=k.left,n=c("body").scrollTop(),v=c("body").scrollLeft(),B=n+A,C=v+z;if(y<=z){for(;k<v;)k++;for(;k+y>C;)k--}else k=v-(y-z)/2;if(h<=A){for(;m<n;)m++;for(;m+h>B;)m--}else m=n-(h-A)/2;a.css({top:m,left:k}).show();(function(b){var d=b.colors;w.html("").css({color:d.numerals});for(var f=Math.PI/2,e=0;12>e;e++){var h=radius+-1*Math.cos(f)*(radius-b.fontSize/__kkc.position_ratio),
k=radius+-1*Math.sin(f)*(radius-b.fontSize/__kkc.position_ratio),h=c("<div>").html(0==e?12:e).css({position:"absolute",top:k,left:h});w.append(h);h.css({marginTop:h.height()/-2,marginLeft:h.width()/-2+10});h.attr("radian",f);f+=Math.PI/6}l(parseInt(a.attr("hour"))*Math.PI/6,b);p.css("color",d.hand);q.css("color","")})(b);l(parseInt(a.attr("hour"))*Math.PI/6,b);w.css("opacity",1);(function(a){var b=a.colors;x.html("").css({color:b.numerals});for(var b=Math.PI/2,d=0;12>d;d++){var e=radius+-1*Math.cos(b)*
(radius-a.fontSize/1.5),h=radius+-1*Math.sin(b)*(radius-a.fontSize/1.5),e=c("<div>").html(5*d).css({position:"absolute",top:h,left:e});x.append(e);e.css({marginTop:e.height()/-2,marginLeft:e.width()/-2+10});e.attr("radian",b);b+=Math.PI/6}})(b);x.css("opacity",0)},c.easing.flex=function(b){return.5>b?-.125*Math.sin(b*Math.PI*2):2*b-1},c.fn.kitkatclock=function(b){function u(a){if(null==a)return null;a=a.replace("#","").replace(/grey/i,"gray");if(-1!=a.indexOf("rgb")){if(-1!=a.indexOf("rgba"))return a;
rgb=a.split("(")[1].split(")")[0];return"rgba("+rgb+",1)"}if(d[a.toLowerCase()])return d[a.toLowerCase()];if(3==a.length){var b=a.substring(0,1),c=a.substring(1,2);a=a.substring(2,3);b+=b;c+=c;a+=a}else b=a.substring(0,2),c=a.substring(2,4),a=a.substring(4,6);return"rgba("+parseInt(b,16)+","+parseInt(c,16)+","+parseInt(a,16)+",1)"}function l(a,b,c){b=b.replace(/rgba|\(|\)/g,"");a=a.replace(/rgba|\(|\)/g,"");b=b.split(",");a=a.split(",");return"rgba("+Math.round((1-c)*parseInt(b[0])+parseInt(a[0])*
c)+","+Math.round((1-c)*parseInt(b[1])+parseInt(a[1])*c)+","+Math.round((1-c)*parseInt(b[2])+parseInt(a[2])*c)+",1)"}var d={aliceblue:"rgba(240,248,255,1)",antiquewhite:"rgba(250,235,215,1)",aqua:"rgba(0,255,255,1)",aquamarine:"rgba(127,255,212,1)",azure:"rgba(240,255,255,1)",beige:"rgba(245,245,220,1)",bisque:"rgba(255,228,196,1)",black:"rgba(0,0,0,1)",blanchedalmond:"rgba(255,235,205,1)",blue:"rgba(0,0,255,1)",blueviolet:"rgba(138,43,226,1)",brown:"rgba(165,42,42,1)",burlywood:"rgba(222,184,135,1)",
cadetblue:"rgba(95,158,160,1)",chartreuse:"rgba(127,255,0,1)",chocolate:"rgba(210,105,30,1)",coral:"rgba(255,127,80,1)",cornflowerblue:"rgba(100,149,237,1)",cornsilk:"rgba(255,248,220,1)",crimson:"rgba(220,20,60,1)",cyan:"rgba(0,255,255,1)",darkblue:"rgba(0,0,139,1)",darkcyan:"rgba(0,139,139,1)",darkgoldenrod:"rgba(184,134,11,1)",darkgray:"rgba(169,169,169,1)",darkgreen:"rgba(0,100,0,1)",darkkhaki:"rgba(189,183,107,1)",darkmagenta:"rgba(139,0,139,1)",darkolivegreen:"rgba(85,107,47,1)",darkorange:"rgba(255,140,0,1)",
darkorchid:"rgba(153,50,204,1)",darkred:"rgba(139,0,0,1)",darksalmon:"rgba(233,150,122,1)",darkseagreen:"rgba(143,188,143,1)",darkslateblue:"rgba(72,61,139,1)",darkslategray:"rgba(47,79,79,1)",darkturquoise:"rgba(0,206,209,1)",darkviolet:"rgba(148,0,211,1)",deeppink:"rgba(255,20,147,1)",deepskyblue:"rgba(0,191,255,1)",dimgray:"rgba(105,105,105,1)",dodgerblue:"rgba(30,144,255,1)",firebrick:"rgba(178,34,34,1)",floralwhite:"rgba(255,250,240,1)",forestgreen:"rgba(34,139,34,1)",fuchsia:"rgba(255,0,255,1)",
gainsboro:"rgba(220,220,220,1)",ghostwhite:"rgba(248,248,255,1)",gold:"rgba(255,215,0,1)",goldenrod:"rgba(218,165,32,1)",gray:"rgba(128,128,128,1)",green:"rgba(0,128,0,1)",greenyellow:"rgba(173,255,47,1)",honeydew:"rgba(240,255,240,1)",hotpink:"rgba(255,105,180,1)",indianred:"rgba(205,92,92,1)",indigo:"rgba(75,0,130,1)",ivory:"rgba(255,255,240,1)",khaki:"rgba(240,230,140,1)",lavender:"rgba(230,230,250,1)",lavenderblush:"rgba(255,240,245,1)",lawngreen:"rgba(124,252,0,1)",lemonchiffon:"rgba(255,250,205,1)",
lightblue:"rgba(173,216,230,1)",lightcoral:"rgba(240,128,128,1)",lightcyan:"rgba(224,255,255,1)",lightgoldenrodyellow:"rgba(250,250,210,1)",lightgray:"rgba(211,211,211,1)",lightgreen:"rgba(144,238,144,1)",lightpink:"rgba(255,182,193,1)",lightsalmon:"rgba(255,160,122,1)",lightseagreen:"rgba(32,178,170,1)",lightskyblue:"rgba(135,206,250,1)",lightslategray:"rgba(119,136,153,1)",lightsteelblue:"rgba(176,196,222,1)",lightyellow:"rgba(255,255,224,1)",lime:"rgba(0,255,0,1)",limegreen:"rgba(50,205,50,1)",
linen:"rgba(250,240,230,1)",magenta:"rgba(255,0,255,1)",maroon:"rgba(128,0,0,1)",mediumaquamarine:"rgba(102,205,170,1)",mediumblue:"rgba(0,0,205,1)",mediumorchid:"rgba(186,85,211,1)",mediumpurple:"rgba(147,112,219,1)",mediumseagreen:"rgba(60,179,113,1)",mediumslateblue:"rgba(123,104,238,1)",mediumspringgreen:"rgba(0,250,154,1)",mediumturquoise:"rgba(72,209,204,1)",mediumvioletred:"rgba(199,21,133,1)",midnightblue:"rgba(25,25,112,1)",mintcream:"rgba(245,255,250,1)",mistyrose:"rgba(255,228,225,1)",
moccasin:"rgba(255,228,181,1)",navajowhite:"rgba(255,222,173,1)",navy:"rgba(0,0,128,1)",oldlace:"rgba(253,245,230,1)",olive:"rgba(128,128,0,1)",olivedrab:"rgba(107,142,35,1)",orange:"rgba(255,165,0,1)",orangered:"rgba(255,69,0,1)",orchid:"rgba(218,112,214,1)",palegoldenrod:"rgba(238,232,170,1)",palegreen:"rgba(152,251,152,1)",paleturquoise:"rgba(175,238,238,1)",palevioletred:"rgba(219,112,147,1)",papayawhip:"rgba(255,239,213,1)",peachpuff:"rgba(255,218,185,1)",peru:"rgba(205,133,63,1)",pink:"rgba(255,192,203,1)",
plum:"rgba(221,160,221,1)",powderblue:"rgba(176,224,230,1)",purple:"rgba(128,0,128,1)",red:"rgba(255,0,0,1)",rosybrown:"rgba(188,143,143,1)",royalblue:"rgba(65,105,225,1)",saddlebrown:"rgba(139,69,19,1)",salmon:"rgba(250,128,114,1)",sandybrown:"rgba(244,164,96,1)",seagreen:"rgba(46,139,87,1)",seashell:"rgba(255,245,238,1)",sienna:"rgba(160,82,45,1)",silver:"rgba(192,192,192,1)",skyblue:"rgba(135,206,235,1)",slateblue:"rgba(106,90,205,1)",slategray:"rgba(112,128,144,1)",snow:"rgba(255,250,250,1)",
springgreen:"rgba(0,255,127,1)",steelblue:"rgba(70,130,180,1)",tan:"rgba(210,180,140,1)",teal:"rgba(0,128,128,1)",thistle:"rgba(216,191,216,1)",tomato:"rgba(255,99,71,1)",turquoise:"rgba(64,224,208,1)",violet:"rgba(238,130,238,1)",wheat:"rgba(245,222,179,1)",white:"rgba(255,255,255,1)",whitesmoke:"rgba(245,245,245,1)",yellow:"rgba(255,255,0,1)",yellowgreen:"rgba(154,205,50,1)"};return this.each(function(){b=b||{};b.time=b.time||"12:00 AM";this.value=b.time;var a=b.size||350;"number"!==typeof a&&(a=
a.indexOf("pt")?parseFloat(a)*(4/3):parseFloat(a));b.size=a-20;a=b.fontSize||40;"number"!==typeof a&&(a=a.indexOf("pt")?parseFloat(a)*(4/3):parseFloat(a));b.fontSize=a;b.fontFamily=b.fontFamily||"Verdana, sans-serif";a=b.colors||{};a.text=a.text||"#FFFFFF";a.clock=a.clock||"#050505";a.numerals=a.numerals||a.text;a.hand=a.hand||"#960000";a.background=a.background||"#222222";a.meridian_background_on=a.meridian_background_on||a.hand;a.meridian_background_off=a.meridian_background_off||null;a.meridian_text=
a.meridian_text||a.text;a.top_indicator_selected=a.top_indicator_selected||a.hand;a.top_indicator_deselected=a.top_indicator_deselected||a.text;a.top_indicator_background=a.top_indicator_background||a.clock;a.border=a.border||"#CCCCCC";for(var d in a)a[d]=u(a[d]);a.meridian_background_off||(a.meridian_background_off=l(a.meridian_background_on,a.background,.6));b.colors=a;__kkc.push(b);c(this).attr("kkc-id",__kkc.length-1).on("mouseup",function(){c(this).is(":focus")&&(this.blur(),__kkc.finalize_wrap(),
__kkc.opener=this,__kkc.setup(__kkc[parseInt(c(this).attr("kkc-id"))]))})})},c.fn.kitkatclock.noDegrade=function(b){!0!==b?__kkc.degrade=!1:__kkc.degrade&&(c("input[type='time']").attr({type:"text","data-role":"time"}),c("input[data-role='time']").kitkatclock())},c(function(){var b=c("<div id='kitkatclock'>").hide(),u=c("<div class='kkc-time-cont'>"),l=c("<span class='kkc-hour'>"),d=c("<span class='kkc-minute'>"),a=c("<span class='kkc-am-pm'>");u.append(l).append(":").append(d).append(a);var l=c("<div class='kkc-clockface-cont'>"),
d=c("<div class='kkc-clockface-clock'>"),a=c("<div class='kkc-clockface-hand'>"),h=c("<div class='kkc-clockface-numbers-hours'>"),p=c("<div class='kkc-clockface-numbers-minutes'>"),q=c("<div class='kkc-clockface-cover'>"),r=c("<div class='kkc-am-btn'>AM</div>"),n=c("<div class='kkc-pm-btn'>PM</div>");l.append(d).append(a).append(h).append(p).append(q).append(r).append(n);d=c("<div class='kkc-done-btn'>Done</div>");b.append(u).append(l).append(d);c("body").append(b).on("click",function(a){var b=c(a.target).attr("kkc-id");
0!=c("#kitkatclock").has(a.target).length||"undefined"!==typeof b&&!1!==b||__kkc.finalize_wrap()});c().kitkatclock.noDegrade(!0)})):(console.log("KitKatClock disabled, no CSS3 support"),__kkc="KitKatClock Disabled",c.fn.kitkatclock=function(){return this})})(jQuery);